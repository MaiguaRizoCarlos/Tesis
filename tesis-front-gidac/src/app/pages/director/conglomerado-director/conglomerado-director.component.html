<div class="bootstrap-wrapper" >
    <div class="container-fluid">
      <div class="row mt20" >
          <mat-card class="mb20">
            <mat-card-header>
              
              <div mat-card-avatar class="example-header-image" style="border-radius: 0; margin-top: 15px; height: 23px; width: 23px;"></div>
              <mat-card-title class="mat-card-title-right" style="font-size: 16px; margin-bottom: 0; padding-bottom: 0; padding-bottom: 0;">
                {{datos.nombreProyecto}}
              </mat-card-title>
              
            </mat-card-header>
            <mat-card-content style="padding-left: 25px;">
              <mat-list class="custom-mat-list">
                <mat-list-item >
                  <div mat-line>
                    <div aria-label="breadcrumb" style="font-size: var(--tamanio-texto-camino); border: 0; padding: 0; margin: 0;">
                      <ol class="breadcrumb " style="border: 0; padding: 0; margin: 0;">
                        <li class="breadcrumb-item derecha"><a  style="color: black; text-decoration: none;" routerLink = "/director-dashboard/">Inicio</a></li>
                        <li class="breadcrumb-item derecha"><a  style="color: black; text-decoration: none;" [routerLink] = "'/director-dashboard/view-proyecto-investigacion/'+idUsuario">Proyectos Investigacion</a></li>
                        <li style="color: #3FC060; text-decoration: none;" class="breadcrumb-item active derecha" aria-current="page">Conglomerado</li>
                      </ol>
                    </div>
                  </div>
                  <!--
                  <div class="btn-group" role="group" aria-label="Basic mixed styles example">
                    <button [routerLink] = "'/user-dashboard/view-conglomerados/'+idProyecto" mat-raised-button color="primary">Ver conglomerados</button>
                  </div>-->
                </mat-list-item>
              </mat-list>  
            </mat-card-content>
          </mat-card>
      </div>
    </div>
  </div>
  
  
  
  
  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" (selectedTabChange)="onTabChange($event)">
  
    <mat-tab label="Mapa" >
  
        <div class="bootstrap-wrapper" style="background-color: var(--submenu-color); padding-top: 10px; ">
      <div class="container-fluid">
        <div class="row mt20" >
          <div class="col-md-5" style="padding-right: 2px; " >
            
            <mat-card class="mb20 custom-card" style="padding: 2px; padding-bottom: 10px; background-color: var(--submenu-color); box-shadow: 0px 0px 3px 3px var(--color-menu-dashboar-grupo)">
              <mat-list class="estilo-mat-list" style="padding: 5px;">
                <mat-list-item class="estilo-mat-item">
                  <div mat-line *ngIf="investigacionDat.country==''"><strong>Explorar</strong></div>
                  <div mat-line *ngIf="investigacionDat.country==''">Seleccione un punto para explorar !!</div>
                  <div mat-line *ngIf="investigacionDat.country!=''" style="font-size: 15px;"><b>Coordenadas:</b> {{investigacionDat.coordenadax}}, {{investigacionDat.coordenaday}}</div>
                  <div mat-line *ngIf="investigacionDat.country!=''" style="padding-top: 5px; font-size: 13px;"><b>País: </b>{{investigacionDat.country}}</div>
                  <div mat-line *ngIf="investigacionDat.country!=''" style="font-size: 13px;"><b>Provincia: </b>{{investigacionDat.state}}</div>
                  <div mat-line *ngIf="investigacionDat.country!=''" style="font-size: 13px;"><b>Cantón: </b>{{investigacionDat.county}}</div>
                  <div mat-line *ngIf="investigacionDat.country!=''" style="font-size: 13px;"><b>Parroquia: </b>{{investigacionDat.parroquia}}</div>
                </mat-list-item>
          
                <mat-divider style="padding-top: 0px;"></mat-divider>
              </mat-list>
          
              <div style="padding: 0;">
    
                <mat-card-content>
                  <mat-expansion-panel style="background-color: var(--submenu-color); " (opened)="panelOpenGrafico = true"
                                   (closed)="panelOpenGrafico = false">
                <mat-expansion-panel-header style="max-width: 500px;">
                    <mat-panel-title>
                      Descripción
                    </mat-panel-title>
                    
                  </mat-expansion-panel-header>
                  
                  <mat-card-subtitle style="color: black; margin-bottom: 0; padding-bottom: 0; padding-bottom: 0;">
                    {{datos.descripcion}}
                  </mat-card-subtitle>
    
                  <!--aqui los dataset-->
                </mat-expansion-panel>
              </mat-card-content>
    
                <mat-card-content>
                  <mat-expansion-panel style="background-color: var(--submenu-color); " (opened)="panelOpenGrafico = true"
                                   (closed)="panelOpenGrafico = false">
                <mat-expansion-panel-header style="max-width: 500px;">
                    <mat-panel-title>
                      Dataset
                    </mat-panel-title>
                    
                  </mat-expansion-panel-header>
                  
                  <mat-form-field  class="mt20 w100 " style="padding: 0px;margin: 0px;padding-top: 20px; height: 100%; min-width: 360px;">
                    <mat-label>Seleccionar datasets</mat-label>
                      <mat-select name="datasets" [(ngModel)]="opcionSeleccionadaDataset.codigoDataset" (selectionChange)="onDatasetChange()">
                        <ng-container *ngFor="let c of listaDatosDataset">
                          <mat-option [value]="c.codigoDataset">
                            {{ c.codigoDataset !== 0 ? 'Dataset ' + c.codigoDataset +' - ' : '' }} {{ c.fechaInicioDataset }} {{ c.codigoDataset !== 0 ? ' al ' : '' }} {{ c.fechaFinDataset }}
                          </mat-option>
                        </ng-container>
                      </mat-select>
                  </mat-form-field>
    
                  <!--aqui los dataset-->
                </mat-expansion-panel>
              </mat-card-content>
    
                <mat-card-content>
                <mat-expansion-panel style="background-color: var(--submenu-color); " (opened)="panelOpenGrafico = true"
                                 (closed)="panelOpenGrafico = false">
              <mat-expansion-panel-header style="max-width: 500px;">
                  <mat-panel-title>
                    Catálogo de datos
                  </mat-panel-title>
                  
                </mat-expansion-panel-header>
                <div class="estilo-buscar">
                  <div class="personalizado1">
                    <input type="text" #txtSearchOrganizacion required class="personalizado2" (keyup)="onSearchOrganizacion( txtSearchOrganizacion.value)">
                    <label class="lbl-busqueda">
                      <span class="text-busqueda">Buscar....</span>
                    </label>
                  </div>
                </div>
                
            
                <mat-form-field  class="mt20 w100 " style="padding: 0px;margin: 0px;padding-top: 20px; height: 100%; min-width: 360px;">
                  <mat-label>Familia</mat-label>
                  <mat-select name="familia" [(ngModel)]="familiaOrganizacionSeleccionado.idFamilia" (selectionChange)="onFamiliaChange($event)" >
                    <mat-option *ngFor="let c of listaFamiliaVariable" [value]="c.idFamilia">
                      {{ c.descripcion }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
    
                <br>
    
                <mat-form-field class="mt20 w100 " style="padding: 0px;margin: 0px;padding-top: 0px; height: 100%; min-width: 360px;">
                  <mat-label>Organización</mat-label>
                  <mat-select name="organizaciones" [(ngModel)]="organizacionSeleccionado.idOrganizacion" (selectionChange)="onOrganizacionChange($event)" >
                    <mat-option *ngFor="let c of listaOrganizaciones" [value]="c.idOrganizacion">
                      {{ c.siglas }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
            
                
                <mat-list>
                  <mat-divider></mat-divider>  
                  <mat-list-item
                    *ngFor="let oC of listaCatalogoOrganizacion | filtroVariablesDifusion:searchOrganizacion:searchOrganizacionVariable | paginate:page_size2:page_number2; let i = index"
                    style="color: var(--color-texto-menu-home)">
                    <div mat-line><mat-card-title
                        style="font-size: 15px; margin-bottom: 0; padding-bottom: 0; padding-bottom: 0;">{{oC.nombreVariable }}</mat-card-title>
                    </div>
                    
                    <div class="btn-group" role="group" aria-label="Basic mixed styles example">
                      <div class="pading-radio-buton">
                        <div class="container-1">
                          <div class="form-group">
                            <input style="display: none;" type="radio" name="radioOpcionVariable" [id]="oC.nombreVariable"
                              [id]="oC.nombreVariable" [checked]="variableSeleccionada === oC.idVariable"
                              (change)="filtrarCatalogo(oC.idVariable)" />
                            <label [for]="oC.nombreVariable"><span class="radio-button-1"></span></label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <mat-divider></mat-divider>
                  </mat-list-item>
                  <mat-list *ngIf="(listaCatalogoOrganizacion| filtroVariablesDifusion:searchOrganizacion:searchOrganizacionVariable ).length===0"
                    style="text-align: center; padding: 20px; margin: 20px;">
                    <p style="color: var(--color-texto-menu-home);">No existen datos !!  </p>
                    <br>
                    <mat-divider></mat-divider>
                  </mat-list>
                </mat-list>
                <mat-divider></mat-divider>
                        <mat-paginator style="background-color: var(--submenu-color);"
                                       (page)="handlePage2($event)"
                                       [length]="(listaCatalogoOrganizacion | filtroVariablesDifusion:searchOrganizacion:searchOrganizacionVariable ).length"
                                       [pageSize]="page_size2"
                                       [pageSizeOptions]="page_size_options2"
                                       showFirstLastButtons>
                        </mat-paginator>
            
              
            
              </mat-expansion-panel>
            </mat-card-content>
            <mat-card-content>
              <mat-expansion-panel *ngIf="dataNumerico && dataKeys1.length > 0" style="background-color: var(--submenu-color); " (opened)="panelOpenGrafico = true"
                                 (closed)="panelOpenGrafico = false">
              <mat-expansion-panel-header>
                  <mat-panel-title>
                    Variables numéricas
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div mat-line *ngIf="investigacionDat.country==''">Seleccione un punto para explorar !!</div>
                
                <mat-form-field  *ngIf="investigacionDat.country!=''" class="mt20 w100" style="padding: 0px;margin: 0px;padding-top: 0px; height: 100%; min-width: 360px;">
                  <mat-label>Graficas</mat-label>
                  <mat-select name="chart" [(ngModel)]="tipoChartSeleccionado.idTipoChart" (selectionChange)="onTipoChart($event)" >
                    <mat-option *ngFor="let c of listaTipoChart" [value]="c.idTipoChart">
                      {{ c.descripcion }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
    
                <div  id="chartsContainer" style="min-width: 170px;"></div>
                
              </mat-expansion-panel>
            </mat-card-content>
            <mat-card-content>
              <mat-expansion-panel *ngIf="dataNominal && dataKeys2.length > 0" style="background-color: var(--submenu-color); " (opened)="panelOpenGrafico = true"
                                 (closed)="panelOpenGrafico = false">
              <mat-expansion-panel-header>
                  <mat-panel-title>
                    Variables categóricas
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div mat-line *ngIf="investigacionDat.country==''">Seleccione un punto para explorar !!</div>
          <mat-card *ngFor="let investigacion of modeloNominal.investigacionDatos" class="investigacion">
            <h2 style="font-size: 15px; margin-bottom: 0px;">{{ investigacion.tipoValor }}</h2>
            <ul class="valores-lista">
              <li *ngFor="let valor of investigacion.valoresLista">
                <div class="valor-item">
                  <p><strong>Profundidad:</strong> {{ valor.profundidad }}</p>
                  <p><strong>Valor:</strong> {{ valor.valor }}</p>
                </div>
              </li>
            </ul>
          </mat-card>
              </mat-expansion-panel>
            </mat-card-content>
          </div>
              </mat-card>
              
            
            <br>
          </div>
          <div class="col-md-7" style="padding-left: 2px;">
            <mat-card class="mb20" style="padding: 2px;">
              <div id="map">
                <div id="select-container">
                  <div class="select">
                    <select class="div-select" name="format" id="format" (change)="onMapChange($event)">
                      <option *ngFor="let map of maps" [value]="map.name">{{ map.label }}</option>
                    </select>
                  </div>
                </div>
                </div>
            </mat-card>
            <br>
          </div>
    
        </div>
      </div>
    </div>
        
      </mat-tab>
      
    <mat-tab label="Conglomerados">
  
      <!-------------------------------------------------------------------------------------------->
      <br>
    
      <mat-list>
        <mat-list-item>
          <div mat-line>
            <mat-form-field>
              <input type="text" class=" mb-2" placeholder="Buscar.." #txtSearch matInput
                (keyup)="onSearch( txtSearch.value )" />
            </mat-form-field>
          </div>

          <button  mat-button matTooltip="Primary" color="primary" class="more-button"  aria-label="Toggle menu" [routerLink] = "'/director-dashboard/descargar-datos-director/'+datos.idProyecto">
            <mat-icon>download</mat-icon>
         </button>
    
        </mat-list-item>
      </mat-list>
    
      <div id="chartsContainer" style="width: 400px;"></div>
      
      <mat-card style="margin-top: 0; border-top: 0; padding-top: 5px;">
              <div class="mat-elevation-z8 table-container">
                <table class="table" mat-table
                  [dataSource]="listaDatosConglomerado | filtroConglomerados:search | paginate:page_size:page_number"
                  class="full-width-table" matSort aria-label="Elements">
    
                  <ng-container matColumnDef="dato1">
                    <th mat-header-cell *matHeaderCellDef>Código conglomerado</th>
                    <td mat-cell *matCellDef="let row">{{row.codigoConglomerado}}</td>
                  </ng-container>
    
                  <ng-container matColumnDef="dato2">
                    <th mat-header-cell *matHeaderCellDef>Nombre del conglomerado</th>
                    <td mat-cell *matCellDef="let row">{{row.nombreConglomerado}}</td>
                  </ng-container>
    
                  <ng-container matColumnDef="dato3">
                    <th mat-header-cell *matHeaderCellDef>Altura</th>
                    <td mat-cell *matCellDef="let row">{{row.altura.altura}} - {{row.altura.unidadMedida.abreviatura}}</td>
                  </ng-container>
    
    
                  <ng-container matColumnDef="opciones">
                    <th mat-header-cell *matHeaderCellDef>Opciones</th>
                    <td mat-cell *matCellDef="let row">
                      <div class="example-button-row">
                      
                      <button mat-raised-button color="accent" [routerLink]="'/director-dashboard/parcelas-director/'+row.idConglomerado+'/'+idProyecto">Parcelas</button>
                    </div>
                    </td>
                  </ng-container>
    
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
    
                <mat-list *ngIf="(listaDatosConglomerado | filtroConglomerados:search).length===0"
                  style="text-align: center; padding: 20px; margin: 20px;">
                  <p>No existen conglomerados disponibles</p>
                  <br>
                  <mat-divider></mat-divider>
                </mat-list>
    
                <mat-paginator (page)="handlePage($event)" [length]="(listaDatosConglomerado | filtroConglomerados:search).length"
                  [pageSize]="page_size" [pageSizeOptions]="page_size_options" showFirstLastButtons>
                </mat-paginator>
              </div>
    </mat-card>
    
    
      <!------------------------------------------------------------------------------------------->
    
    </mat-tab>
  
    
  
  </mat-tab-group>
  
  